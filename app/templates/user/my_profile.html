{% extends "private_app_layout.html" %}
{% block title %}Perfil{% endblock %}
{% block head %}
  {{ super() }}
{% endblock %}
{% block content %}
{% with messages = get_flashed_messages() %} {% if messages %}
  {% for message in messages %}
  {{ message }}
  {% endfor %}
{% endif %} {% endwith %} 
  <h1>Mi perfil:</h1>
  <form action="{{ url_for('user.update_my_profile') }}" method="POST">
    <p>
      <label>Nombre de usuario:<label></br>
      <p>{{user.username}}</p>
    </p>
    <p>
      <label>Nombre:<label></br>
      <input name="first_name" value={{user.first_name}} placeholder="Ingrese un nombre"/>
    </p>
    <p>
      <label>Apellido:<label></br>
      <input name="last_name" value={{user.last_name}} placeholder="Ingrese un apellido"/>
    </p>
    <p>
      <label>Email:<label></br>
      <input name="email" value={{user.email}} placeholder="Ingrese un email"/>
    </p>
    <p>
      <label>Contraseña:<label></br>
      <input type="password" name="password" value={{user.password}} placeholder="Ingrese una contraseña"/>
    </p>
    {% if helper_has_role(user.roles, "rol_administrador") %}                
        <p>
            <label>Roles:<label></br>
            <label>  
            <input name="rol" type="checkbox" value="rol_administrador"   {{ "checked" if helper_has_role(user.roles, "rol_administrador") }}/>Administrador
            </label>
            <label>
            <input name="rol" type="checkbox" value="rol_operador"  {{"checked" if helper_has_role(user.roles, "rol_operador") }}/>Operador
            </label>
        </p>
        <p>
            <label>Estado:<label></br>
            <label>
                <input name="state" type="radio" value="activo" {{"checked" if user.active == 1}}/>Activo
            </label>
            <label>
                <input name="state" type="radio" value="bloqueado" {{"checked" if user.active == 0}}/>Bloqueado
            </label>
        </p>
    {% endif %}
    
    <p>
      <input type="submit" value="Editar">
    </p>
  </form>

  <a href="{{url_for('home.index')}}" class="link">Volver</a>      
{% endblock %}


